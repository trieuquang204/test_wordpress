!function(e){"use strict";e.BrooksideAjaxSearch=function(t){this.options=e.extend({},{delay:300,minChars:3,scope:"body"},t),this.scope=e(this.options.scope),this.timer=!1,this.lastVal="",this.bind_events()},e.BrooksideAjaxSearch.prototype={bind_events:function(){this.scope.on("keyup","#header-s",e.proxy(this.try_search,this))},try_search:function(t){clearTimeout(this.timer),t.currentTarget.value.length>=this.options.minChars&&this.lastVal!=e.trim(t.currentTarget.value)&&(this.timer=setTimeout(e.proxy(this.do_search,this,t),this.options.delay))},destory_results:function(t){e("#header #search-list").remove()},do_search:function(t){var i=e(t.currentTarget).attr("autocomplete","off").parents("form:eq(0)"),a=i.parent().find("#search-list"),s=e('<div id="ajax_load"><div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div></div>'),r=i.attr("action"),o=i.serialize();o+="&action=brookside_ajax_search",-1!=r.indexOf("?")&&(o+="&"+(r=r.split("?"))[1]),t.currentTarget.value.length<=this.options.minChars&&a.remove(),e("#search-list").length||(a=e('<div id="search-list"></div>').appendTo(i.parent())),a.find(".ajax_not_found").length&&-1!=t.currentTarget.value.indexOf(this.lastVal)||(this.lastVal=t.currentTarget.value,e.ajax({url:brooksideAjaxSearch.ajaxurl,type:"POST",data:o,beforeSend:function(){e("#ajax_load").length||s.appendTo(a)},success:function(e){0==e&&(e=""),a.html(e)},complete:function(){s.remove()}}))}},e(document).ready(function(){new e.BrooksideAjaxSearch({scope:"#header"}),e(document).on("click",function(){e("#header #search-list").remove()})})}(jQuery);